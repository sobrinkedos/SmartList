{"ast":null,"code":"import _construct from \"@babel/runtime/helpers/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { _Filter, Filter } from \"../FirestoreFilter\";\nvar QueryConstraint = function () {\n  function QueryConstraint(type) {\n    _classCallCheck(this, QueryConstraint);\n    this.type = type;\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    this._args = args;\n  }\n  return _createClass(QueryConstraint, [{\n    key: \"_apply\",\n    value: function _apply(query) {\n      return query[this.type].apply(query, this._args);\n    }\n  }]);\n}();\nexport function query(query, queryConstraint) {\n  for (var _len2 = arguments.length, additionalQueryConstraints = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    additionalQueryConstraints[_key2 - 2] = arguments[_key2];\n  }\n  var queryConstraints = [queryConstraint].concat(additionalQueryConstraints).filter(function (constraint) {\n    return constraint !== undefined;\n  });\n  var q = query;\n  for (var _queryConstraint of queryConstraints) {\n    q = _queryConstraint._apply(q);\n  }\n  return q;\n}\nexport function where(fieldPath, opStr, value) {\n  return new QueryConstraint('where', fieldPath, opStr, value);\n}\nfunction getFilterOps(queries) {\n  var ops = [];\n  for (var _query of queries) {\n    if (_query.type !== 'where') {\n      throw 'Not where';\n    }\n    var args = _query._args;\n    if (!args.length) {\n      throw 'No args';\n    }\n    if (args[0] instanceof _Filter) {\n      ops.push(args[0]);\n      continue;\n    }\n    var _args = _slicedToArray(args, 3),\n      fieldPath = _args[0],\n      opStr = _args[1],\n      value = _args[2];\n    ops.push(Filter(fieldPath, opStr, value));\n  }\n  return ops;\n}\nexport function or() {\n  for (var _len3 = arguments.length, queries = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    queries[_key3] = arguments[_key3];\n  }\n  var ops = getFilterOps(queries);\n  return new QueryConstraint('where', Filter.or.apply(Filter, _toConsumableArray(ops)));\n}\nexport function and() {\n  for (var _len4 = arguments.length, queries = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    queries[_key4] = arguments[_key4];\n  }\n  var ops = getFilterOps(queries);\n  return new QueryConstraint('where', Filter.and.apply(Filter, _toConsumableArray(ops)));\n}\nexport function orderBy(fieldPath, directionStr) {\n  return new QueryConstraint('orderBy', fieldPath, directionStr);\n}\nexport function startAt() {\n  for (var _len5 = arguments.length, docOrFields = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    docOrFields[_key5] = arguments[_key5];\n  }\n  return _construct(QueryConstraint, ['startAt'].concat(docOrFields));\n}\nexport function startAfter() {\n  for (var _len6 = arguments.length, docOrFields = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    docOrFields[_key6] = arguments[_key6];\n  }\n  return _construct(QueryConstraint, ['startAfter'].concat(docOrFields));\n}\nexport function endAt(value, key) {\n  if (!key) {\n    return new QueryConstraint('endAt', value);\n  }\n  return new QueryConstraint('endAt', value, key);\n}\nexport function endBefore(value, key) {\n  if (!key) {\n    return new QueryConstraint('endBefore', value);\n  }\n  return new QueryConstraint('endBefore', value, key);\n}\nexport function limit(limit) {\n  return new QueryConstraint('limit', limit);\n}\nexport function limitToLast(limit) {\n  return new QueryConstraint('limitToLast', limit);\n}\nexport function getDocs(query) {\n  return query.get({\n    source: 'default'\n  });\n}\nexport function getDocsFromCache(query) {\n  return query.get({\n    source: 'cache'\n  });\n}\nexport function getDocsFromServer(query) {\n  return query.get({\n    source: 'server'\n  });\n}\nexport function deleteDoc(reference) {\n  return reference.delete();\n}","map":{"version":3,"names":["_Filter","Filter","QueryConstraint","type","_classCallCheck","_len","arguments","length","args","Array","_key","_args","_createClass","key","value","_apply","query","apply","queryConstraint","_len2","additionalQueryConstraints","_key2","queryConstraints","concat","filter","constraint","undefined","q","where","fieldPath","opStr","getFilterOps","queries","ops","push","_slicedToArray","or","_len3","_key3","_toConsumableArray","and","_len4","_key4","orderBy","directionStr","startAt","_len5","docOrFields","_key5","_construct","startAfter","_len6","_key6","endAt","endBefore","limit","limitToLast","getDocs","get","source","getDocsFromCache","getDocsFromServer","deleteDoc","reference","delete"],"sources":["C:/Users/rilto/Downloads/meusProjetos/smartList/node_modules/@react-native-firebase/firestore/lib/modular/query.js"],"sourcesContent":["/**\n * @typedef {import('..').FirebaseFirestoreTypes.DocumentReference} DocumentReference\n * @typedef {import('..').FirebaseFirestoreTypes.DocumentSnapshot} DocumentSnapshot\n * @typedef {import('..').FirebaseFirestoreTypes.FieldPath} FieldPath\n * @typedef {import('..').FirebaseFirestoreTypes.QueryCompositeFilterConstraint} QueryCompositeFilterConstraint\n * @typedef {import('..').FirebaseFirestoreTypes.QuerySnapshot} QuerySnapshot\n * @typedef {import('..').FirebaseFirestoreTypes.Query} Query\n * @typedef {import('..').FirebaseFirestoreTypes.WhereFilterOp} WhereFilterOp\n * @typedef {import('../FirestoreFilter')._Filter} _Filter\n * @typedef {import('./query').IQueryConstraint} IQueryConstraint\n * @typedef {import('./query').OrderByDirection} OrderByDirection\n * @typedef {import('./query').QueryFieldFilterConstraint} QueryFieldFilterConstraint\n * @typedef {import('./query').QueryLimitConstraint} QueryLimitConstraint\n * @typedef {import('./query').QueryNonFilterConstraint} QueryNonFilterConstraint\n * @typedef {import('./query').QueryOrderByConstraint} QueryOrderByConstraint\n * @typedef {import('./query').QueryStartAtConstraint} QueryStartAtConstraint\n */\n\nimport { _Filter, Filter } from '../FirestoreFilter';\n\n/**\n * @implements {IQueryConstraint}\n */\nclass QueryConstraint {\n  constructor(type, ...args) {\n    this.type = type;\n    this._args = args;\n  }\n\n  _apply(query) {\n    return query[this.type].apply(query, this._args);\n  }\n}\n\n/**\n * @param {Query} query\n * @param {QueryCompositeFilterConstraint | QueryConstraint | undefined} queryConstraint\n * @param {(QueryConstraint | QueryNonFilterConstraint)[]} additionalQueryConstraints\n * @returns {Query}\n */\nexport function query(query, queryConstraint, ...additionalQueryConstraints) {\n  const queryConstraints = [queryConstraint, ...additionalQueryConstraints].filter(\n    constraint => constraint !== undefined,\n  );\n  let q = query;\n  for (const queryConstraint of queryConstraints) {\n    q = queryConstraint._apply(q);\n  }\n  return q;\n}\n\n/**\n * @param {string | FieldPath} fieldPath\n * @param {WhereFilterOp} opStr\n * @param {unknown} value\n * @returns {QueryFieldFilterConstraint}\n */\nexport function where(fieldPath, opStr, value) {\n  return new QueryConstraint('where', fieldPath, opStr, value);\n}\n\n/**\n * @param {QueryFieldFilterConstraint[]} queries\n * @returns {_Filter[]}\n */\nfunction getFilterOps(queries) {\n  const ops = [];\n  for (const query of queries) {\n    if (query.type !== 'where') {\n      throw 'Not where'; // FIXME: Better error message\n    }\n\n    const args = query._args;\n    if (!args.length) {\n      throw 'No args'; // FIXME: Better error message\n    }\n\n    if (args[0] instanceof _Filter) {\n      ops.push(args[0]);\n      continue;\n    }\n\n    const [fieldPath, opStr, value] = args;\n    ops.push(Filter(fieldPath, opStr, value));\n  }\n  return ops;\n}\n\n/**\n * @param {QueryFieldFilterConstraint[]} queries\n * @returns {QueryCompositeFilterConstraint}\n */\nexport function or(...queries) {\n  const ops = getFilterOps(queries);\n  return new QueryConstraint('where', Filter.or(...ops));\n}\n\n/**\n * @param {QueryFieldFilterConstraint[]} queries\n * @returns {QueryCompositeFilterConstraint}\n */\nexport function and(...queries) {\n  const ops = getFilterOps(queries);\n  return new QueryConstraint('where', Filter.and(...ops));\n}\n\n/**\n * @param {string | FieldPath} fieldPath\n * @param {OrderByDirection} directionStr\n * @returns {QueryOrderByConstraint}\n */\nexport function orderBy(fieldPath, directionStr) {\n  return new QueryConstraint('orderBy', fieldPath, directionStr);\n}\n\n/**\n * @param {(unknown | DocumentSnapshot)} docOrFields\n * @returns {QueryStartAtConstraint}\n */\nexport function startAt(...docOrFields) {\n  return new QueryConstraint('startAt', ...docOrFields);\n}\n\n/**\n * @param {(unknown | DocumentSnapshot)} docOrFields\n * @returns {QueryStartAtConstraint}\n */\nexport function startAfter(...docOrFields) {\n  return new QueryConstraint('startAfter', ...docOrFields);\n}\n\n/**\n * @param {number | string | boolean | null} value\n * @param {string?} key\n * @returns {QueryConstraint}\n */\nexport function endAt(value, key) {\n  if (!key) {\n    return new QueryConstraint('endAt', value);\n  }\n  return new QueryConstraint('endAt', value, key);\n}\n\n/**\n * @param {number | string | boolean | null} value\n * @param {string?} key\n * @returns {QueryConstraint}\n */\nexport function endBefore(value, key) {\n  if (!key) {\n    return new QueryConstraint('endBefore', value);\n  }\n  return new QueryConstraint('endBefore', value, key);\n}\n\n/**\n * @param {number} limit\n * @returns {QueryLimitConstraint}\n */\nexport function limit(limit) {\n  return new QueryConstraint('limit', limit);\n}\n\n/**\n * @param {number} limit\n * @returns {QueryConstraint}\n */\nexport function limitToLast(limit) {\n  return new QueryConstraint('limitToLast', limit);\n}\n\n/**\n * @param {Query} query\n * @returns {Promise<QuerySnapshot>}\n */\nexport function getDocs(query) {\n  return query.get({ source: 'default' });\n}\n\n/**\n * @param {Query} query\n * @returns {Promise<QuerySnapshot>}\n */\nexport function getDocsFromCache(query) {\n  return query.get({ source: 'cache' });\n}\n\n/**\n * @param {Query} query\n * @returns {Promise<QuerySnapshot>}\n */\nexport function getDocsFromServer(query) {\n  return query.get({ source: 'server' });\n}\n\n/**\n * @param {DocumentReference} reference\n * @returns {Promise<void>}\n */\nexport function deleteDoc(reference) {\n  return reference.delete();\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}